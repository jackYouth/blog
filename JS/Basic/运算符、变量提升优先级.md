# 运算符优先级

表达式中运算符的优先级决定了表达式中运算执行的先后顺序, 优先级高的先执行. 列举几个常见的:

- 圆括号 (最高, 20)
- 成员访问(.和[])、new、函数调用(优先级 19)
- new 无参数列表 (18)
- 后置递增、递减(优先级 17, a++、a--)
- 前置递增、递减、逻辑非(!a)、一元加减法(+a)、typeof、delete、await、void(优先级 16)
- 幂运算(15)
- 乘除运算(14)
- 加减运算(13)
- 按位移动(左移、右移) (12)
- 比较运算(大于, 小于)、in、instance(11)
- ======================================= 前十后十分界线 =========================
- 等号比较运算(等等、全等、非全等) (10)
- 按位与(&) (9)
- 按位异或(^) (8)
- 按位或(|) (7)
- 逻辑与(&) (6)
- 逻辑或(|) (5)
- 条件运算符 (Boolean ? a : b) (4)
- 赋值运算符 (=、+=、-=) (从右往左) (3)
- yield 运算符 (2)
- 展开运算符 (1)
- 逗号运算符 (0)

### 面试题

```js
var a = { n: 1 };
var b = a;
a.x = a = { n: 2 };

console.log(a.n, b.n);
console.log(a.x, b.x);

// 结果
2, 1;
undefined, { n: 2 };

// 解析
// 最后一步赋值之前的结果: a {n:1} b {n: 1}
// 第三步中有两个运算符 成员访问(优先级2)和赋值运算(优先级3), 所以先执行成员访问, a,b都为 {n: 1, x: undefined}
// 接下来等号运算符, 等号运算符是从右往左看, 所以先是 a 改变了内存指向到了{n:2}. 再来, 前半部分, 内存中的{n: 1, x: undefined}.x = {n:2}, 内存中的这个对象对应的是b, 所以b最终为{n: 1, x: {n: 2}}
```

# 变量提升优先级

变量提升也是有优先级的, 函数声明 > arguments > 变量声明.

### 面试题 1:

```js
console.log(c);
var c;
function c(a) {
  console.log(a);
  var a = 3;
  function a() {}
}
c(2);

// 结果:
function c(a) {
  console.log(a);
  var a = 3;
  function a() {}
}
function a() {}

// 解析
变量提升也有优先级;
```

### 面试题 2:

```js
var c = 1;
function c(c) {
  console.log(c);
  var c = 3;
}
console.log(c);
c(2);

// 结果:
1
TypeError: c is not a function

// 解析:
函数会变量提升到最上面, 所以下面c已经被赋值为1了
```
